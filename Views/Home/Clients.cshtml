@{
    ViewBag.Title = "Clients";
}
<h2>@ViewBag.Title.</h2>
<h3>@ViewBag.Message</h3>

<table>
    <thead>
        <tr>
            <th>Passenger name</th>
            <th>Meal</th>
            <th>Surcharge</th>
            <th></th>
        </tr>
    </thead>
    <tbody data-bind="foreach: clients">
        <tr>
            <td><a href="#" data-bind="text: company, click: $parent.selectClient"></a></td>
            @*<td data-bind="text: meal().mealName"></td>
            <td data-bind="text: meal().price"></td>*@
        </tr>
    </tbody>
</table>

<table>
    <tbody>
        <tr>
            <td>Company</td>
            <td><input type="text" data-bind="value: selectedClient.company"/></td>
        </tr>
    </tbody>
</table>

<script>
    // Class to represent a row in the seat reservations grid
    function Client(item) {
        var self = this;
        self.company = item.Company;
        self.firstName = item.FirstName;
        self.lastName = item.LastName;
        self.country = item.Country;
        self.email = item.Email;
        self.phone = item.Phone;
        self.address = item.Address;
        self.billingInfo = item.BillingInfo;
        self.adminEmail = item.AdminEmail;
        //self.firstName = ko.observable(initialMeal);
    }

    // Overall viewmodel for this screen, along with initial state
    function ClientViewModel() {
        var self = this;
        self.clients = ko.observableArray([]);
        self.selectedClient = ko.observable();

        $.getJSON("/api/client", function (allData) {
            var mappedTasks = $.map(allData, function (item) { return new Client(item) });
            self.clients(mappedTasks);
        });

        self.selectClient = function (client) {
            self.selectedClient(client);
        }

        // Non-editable catalog data - would come from the server
        //self.availableMeals = [
        //    { mealName: "Standard (sandwich)", price: 0 },
        //    { mealName: "Premium (lobster)", price: 34.95 },
        //    { mealName: "Ultimate (whole zebra)", price: 290 }
        //];

        // Editable data
        //self.seats = ko.observableArray([
        //    new SeatReservation("Steve", self.availableMeals[0]),
        //    new SeatReservation("Bert", self.availableMeals[0])
        //]);
    }

    ko.applyBindings(new ClientViewModel());
</script>